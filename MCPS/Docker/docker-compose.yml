# ============================================
# üê≥ MCP Universal Docker Compose
# Gerado: 2025-12-10
# Autor: Kiro (DevSan AI)
# Objetivo: Apenas MCPs HTTP/SSE que rodam como daemon
# ============================================
# NOTA: MCPs STDIO (tavily, memory, fetch, etc) devem ser usados via
#       docker run -i --rm, n√£o como containers daemon.
#       Veja kiro-mcp-docker.json para configura√ß√£o STDIO.
# ============================================

services:
  # === CONTEXT7 - Documenta√ß√£o de bibliotecas (HTTP/SSE) ===
  context7:
    image: mcp/context7:latest
    container_name: mcp-context7
    ports:
      - "8080:8080"
    environment:
      - CONTEXT7_API_KEY=${CONTEXT7_API_KEY}
      - FASTMCP_LOG_LEVEL=${FASTMCP_LOG_LEVEL:-ERROR}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - mcp-network

networks:
  mcp-network:
    driver: bridge
    name: mcp-universal-network

volumes:
  # Volume para Memory MCP (usado via docker run -i)
  mcp-memory-data:
    name: mcp-memory-data
